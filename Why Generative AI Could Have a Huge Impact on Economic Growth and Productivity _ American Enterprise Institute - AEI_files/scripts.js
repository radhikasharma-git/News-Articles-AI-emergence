(function($){var winWidth=$(window).width();$('html').addClass('js').removeClass('no-js');var browser='';var browserVersion=0;if(/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent)){browser='Opera';}else if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){browser='MSIE';}else if(/Navigator[\/\s](\d+\.\d+)/.test(navigator.userAgent)){browser='Netscape';}else if(/Chrome[\/\s](\d+\.\d+)/.test(navigator.userAgent)){browser='Chrome';}else if(/Safari[\/\s](\d+\.\d+)/.test(navigator.userAgent)){browser='Safari';/Version[\/\s](\d+\.\d+)/.test(navigator.userAgent);browserVersion=new Number(RegExp.$1);}else if(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)){browser='Firefox';}
if(browserVersion===0){browserVersion=parseFloat(new Number(RegExp.$1));}
$('#notice').hide();$('#form-heading').hide();if($("#bm").length){$('html, body').animate({scrollTop:$('#bm').offset().top-100},'slow');}
$("textarea#s_answer").on('input',function(){var characters=$("textarea#s_answer").val().length;$("#counter").text((characters)+"/1000");});if(!$('ul.menu > li > a').parent().hasClass('menu-item-has-children')&&winWidth>1024){$('a[href^="#"]').on('click',function(e){e.preventDefault();var target=this.hash;if(target.length){$('html, body').stop().animate({'scrollTop':$(target).offset().top},750,'swing',function(){$('#secondary-nav').find('a').removeClass('active');$('[href*="'+target+'"]').addClass('active');});}});}
$('ul.menu > li > a').on('click',function(event){if($(this).parent().hasClass('menu-item-has-children')&&winWidth<1280){event.preventDefault();$(this).parent().find('ul.sub-menu').toggleClass('show');$('#header-search > span').parent().removeClass('show');}});$("#rsvp_button").on('click',function(e){e.preventDefault();$("#event-rsvp-form").show();$('#form-heading').html('To register for this event, enter the following details:');$('#form-heading').show();$('#notice').show();$('#watch-online').show();});$("#summit_rsvp_button").on('click',function(e){e.preventDefault();$("#summit_form").attr('style','height:100%;'+'display:block;');$("#summit_rsvp_button").hide();$('#form-heading').html('Enter the following details to register for this event:');$('#form-heading').show();$('#notice').show();});$("#ae_rsvp_button").on('click',function(e){e.preventDefault();$("#ae_form").attr('style','height:100%;'+'display:block;');$("#ae_rsvp_button").hide();$('#form-heading').html('Enter the following details to register for this event:');$('#form-heading').show();$('#notice').show();});$("#cc_rsvp_button").on('click',function(e){e.preventDefault();$('#event-rsvp-form').show();$("#cc_rsvp_button").hide();$('#form-heading').html('Enter the following details to register for this event:');$('#form-heading').show();$('#notice').show();});$("#media-rsvp-button").on('click',function(e){e.preventDefault();$("#media-rsvp-form").show();$('#form-heading-media').show();$('#notice').show();});$("#num-guests").on('change',function(){var num=$(this).val();if(num==0){$("#guests").hide();clear_fields(["g1","g2","g3"]);}else
$("#guests").show();if(num==1){$(".g2, .g3").hide();clear_fields(["g2","g3"]);$(".g1").show();}else if(num==2){$(".g3").hide();$(".g1, .g2").show();clear_fields(["g3"]);}else{$(".guest").show();}});function clear_fields(elements){$.each(elements,function(i,val){$("."+val+" :input").val("");});}
$("#event_form").validate({onfocusout:function(element){$(element).valid();},submitHandler:function(form){$('#event_form_submit').attr('disabled',true);$('#event_form_submit').attr('value','Processing...');grecaptcha.ready(function(){grecaptcha.execute('6Leh1JAiAAAAAGLj4kZADelDM0eMy8vbLgU4yBG0',{action:'submit'}).then(function(token){$(form).append('<input type="hidden" name="g-recaptcha_token" value="'+token+'" />');form.submit();});});},rules:{attendance_type:{required:true},fname:{required:true},lname:{required:true},email:{required:true,email:true},zip:{required:true},'g1-fname':{required:function(element){return $('#num-guests').val()>=1;}},'g1-lname':{required:function(element){return $('#num-guests').val()>=1;}},'g2-fname':{required:function(element){return $('#num-guests').val()>=2;}},'g2-lname':{required:function(element){return $('#num-guests').val()>=2;}},'g3-fname':{required:function(element){return $('#num-guests').val()>=3;}},'g3-lname':{required:function(element){return $('#num-guests').val()>=3;}}}});$("#cc_event_form").validate({onfocusout:function(element){updateError();$(element).valid();},submitHandler:function(form){$('#event_form_submit').attr('disabled',true);$('#event_form_submit').attr('value','Processing...');grecaptcha.ready(function(){grecaptcha.execute('6Leh1JAiAAAAAGLj4kZADelDM0eMy8vbLgU4yBG0',{action:'submit'}).then(function(token){$(form).append('<input type="hidden" name="g-recaptcha_token" value="'+token+'" />');form.submit();});});},rules:{fname:{required:true},lname:{required:true},email:{required:true,email:true},organization:{required:true},position:{required:true},phone:{required:true,phoneUS:true},alternate_phone:{phoneUS:true},months:{required:true},days:{required:true},years:{required:true},gradution:{required:true},s_answer:{maxlength:1000}},messages:{phone:"Enter a valid phone number",alternate_phone:"Enter a valid phone number",s_answer:"Character count should not exceed 1000",months:"Please fill out the birth month",days:"Please fill out the day of birth",years:"Please fill out the birth year"}});$("input#select-yes").click(function(){if($(this).is(':checked')){$(".rsvp-yes").attr("checked",true);$(".rsvp-no").removeAttr("checked",false);}});$("input#select-no").click(function(){if($(this).is(':checked')){$(".rsvp-no").attr("checked",true);$(".rsvp-yes").removeAttr("checked",false);}});$(document).on('submit','form.event-series',function(e){if($("input.series-input:checked").length==0){e.preventDefault();$('.series-rsvp-error').attr('style','display:block;');$('#event_form_submit').attr('disabled',true);}else if($("input.rsvp-yes:checked").length!==0&&$("#webinar").hasClass("phone-item")){if($.trim($("input#phone").val().length)<6){e.preventDefault();$('.yes-rsvp-error').attr('style','display:block;');}else{$('.yes-rsvp-error').attr('style','display:none;');$('#event_form_submit').removeAttr('disabled',true);$("form.event-series").submit();}}else{$('.series-rsvp-error').attr('style','display:none;');$('.yes-rsvp-error').attr('style','display:none;');$('#event_form_submit').removeAttr('disabled',true);$("form.event-series").submit();}});$("input.series-input").click(function(){if($(this).is(':checked')){$('.series-rsvp-error').attr('style','display:none;');$('#event_form_submit').removeAttr('disabled',true);}});$('#years').prepend('<option value="">');for(i=new Date().getFullYear()-16;i>1900;i--){$('#years').append($('<option />').val(i).html(i));}
$('#months').prepend('<option value="">');for(i=1;i<13;i++){$('#months').append($('<option />').val(i).html(i));}
updateNumberOfDays();function updateNumberOfDays(){$('#days').html('');month=$('#months').val();year=$('#years').val();days=daysInMonth(month,year);$('#days').prepend('<option value="">');for(i=1;i<days+1;i++){$('#days').append($('<option />').val(i).html(i));}}
function daysInMonth(month,year){return new Date(year,month,0).getDate();}
$("#cc_event_form").bind("submit",function(){updateError();});$(".birthdate-group").bind("blur click focus",function(event){updateError();return false;});function updateError(){if($('#months-error').text().length>0){$('#days-error').css({'display':'none'});$('#years-error').css({'display':'none'});$('#months-error').css({'display':'none'});$('#months-error').css({'display':'block'});}else if($('#days-error').text().length>0){$('#days-error').css({'display':'none'});$('#years-error').css({'display':'none'});$('#months-error').css({'display':'none'});$('#days-error').css({'display':'block'});}else if($('#years-error').text().length>0){$('#days-error').css({'display':'none'});$('#years-error').css({'display':'none'});$('#months-error').css({'display':'none'});$('#years-error').css({'display':'block'});}}
$("#media-crew-sign-up").validate({onfocusout:function(element){$(element).valid();},submitHandler:function(form){$('#submitMedia').attr('disabled',true);$('#submitMedia').attr('value','Processing...');grecaptcha.ready(function(){grecaptcha.execute('6Leh1JAiAAAAAGLj4kZADelDM0eMy8vbLgU4yBG0',{action:'submit'}).then(function(token){$(form).append('<input type="hidden" name="g-recaptcha_token" value="'+token+'" />');form.submit();});});},rules:{message_phone:{required:true,phoneUS:true},day_of_contact_phone:{phoneUS:true},message_tv_camera:{required:true},message_still_camera:{required:true}},messages:{message_phone:"Enter a valid phone number",day_of_contact_phone:"Enter a valid phone number"}});if(browser=='MSIE'&&browserVersion<=8){$('#notice').html('<p><b>We have detected that you are using an unsupported browser that might not display the registration form correctly. If you have trouble registering for this event, please contact <a href="mailto:conferences@aei.org">conferences@aei.org</a>.</b></p>');}
function onScroll(event){var scrollPos=$(document).scrollTop();$('#secondary-nav a').each(function(){var currLink=$(this);var refElement=$(currLink.attr("href"));if(refElement.position().top<=scrollPos&&refElement.position().top+refElement.height()>scrollPos){$('#secondary-nav a').removeClass("active");currLink.addClass("active");}
else{currLink.removeClass("active");}});}
$(document).on('click','label.add-to-calendar-checkbox',function(event){$(this).parent().find('a').toggle();});function noscroll(){window.scrollTo(0,0);}
var pull=$('#pull');pull.on('click',function(event){event.preventDefault();if($('.main-menu').hasClass('is-open')){$('.main-menu').removeClass('is-open').slideUp();window.removeEventListener('scroll',noscroll);}else{$('.main-menu').addClass('is-open').slideDown();window.addEventListener('scroll',noscroll);}
console.log('TOGGLE');});$('.main-menu-search').on('click',function(e){e.preventDefault();$('.main-search').slideToggle('is-open');$('.main-search').clearQueue();});$(".tablink").on('click',function(e){e.preventDefault();var i;var x=document.getElementsByClassName("tab");for(i=0;i<x.length;i++){x[i].style.display="none";}
$(".tablink").removeClass("active");document.getElementById($(this).attr('href')).style.display="block";$(this).addClass("active");});$('img').each(function(){if($(this).parent('a').length){$(this).parent().addClass('remove-underline');}});$('.js-minimize').each(function(){$this=$(this);var t=$this.html();if(t.length<700){return;};var heightAdjustment=60;var closedHeight=$this.find(">:first-child").height()+heightAdjustment;$this.data('closedHeight',closedHeight);$this.data('openHeight',$this.height());$this.wrapInner('<div class="minimize-inner" style="height: '+closedHeight+'px;" />');$this.append('<p><a href="#" class="more">More bio and experience</a><a href="#" class="less">Less</a></p>');}).on('click','.more',function(e){e.preventDefault();var $parent=$(this).parents('.js-minimize');var $parentInner=$parent.find('.minimize-inner');var openHeight=$parent.data('openHeight');$parent.addClass('minimize--open');$parentInner.css('height',openHeight+'px');}).on('click','.less',function(e){e.preventDefault();var $parent=$(this).parents('.js-minimize');var $parentInner=$parent.find('.minimize-inner');var closedHeight=$parent.data('closedHeight');$parent.removeClass('minimize--open');$parentInner.css('height',closedHeight+'px');});var content=$('div.the-content');content.find('iframe[src*="youtube.com"]').closest('p').wrapInner('<div class="videoWrapper"></div>');$('iframe[src*="youtube.com"], iframe[src*="player.vimeo.com"]').each(function(){if($(this).parent('div.wp-block-embed__wrapper').length){$(this).parent().addClass('videoWrapper');}});content.find('p span').css('font-weight','300');$('ul.menu > li').on('mouseenter',function(){if(winWidth<1280){return;}
var $this=$(this);var $elem=$this.find('.sub-menu:first');if($this.hasClass('menu-item-has-children')){if($elem.hasClass('show')){$elem.removeClass('show');}else{$elem.addClass('show');}}}).on('mouseleave',function(){if(winWidth<1280){return;}
$(this).find('.show').removeClass('show');});$('#header-search input[type="text"]').attr('placeholder','Search');$('#header-search input[type="text"]').on('focusin',function(){$(this).attr('placeholder','');});$('#header-search input[type="text"]').on('focusout',function(){$(this).attr('placeholder','Search');});if(winWidth<1280){$('#header-search > span').on('click',function(){if($(this).parent().hasClass('show')){$(this).parent().removeClass('show');}else{$(this).parent().addClass('show');$('ul.menu > li').removeClass('show');}});}
var facet=$('.search-facets > .search-facet');facet.each(function(){var scrollHeight=$(this).find('ul').get(0).scrollHeight;var clientHeight=$(this).find('ul').get(0).clientHeight;if(scrollHeight>clientHeight&&winWidth>=1024){$(this).append('<div class="scroll">Scroll<span></span></div>');}
var heading=$(this).find('h3');if(winWidth<=1024){heading.on('click',function(){$(this).siblings('ul').slideToggle();});}});$(document).ready(function(){$('#loader').hide();$('.topic-wrapper').on('click',function(){$(this).toggleClass('opened');var drawer=$(this).siblings('.drawer');if(!drawer.is(':visible')){drawer.slideDown(200);}else{drawer.slideUp(200);}});$(".singleCBwrapper img").on("click",function(event){var info=$(this).siblings('.info');if(!info.is(':visible')){info.slideDown(200);}else{info.slideUp(200);}});$('#unsubscribe_newsletters').change(function(){var c=this.checked?true:false;if(c==true){$('input.newsletter:checkbox').attr('checked',false);}});$('#unsubscribe_events').change(function(){var c=this.checked?true:false;if(c==true){$('input.event:checkbox').attr('checked',false);}});$('#opt_out').change(function(){var c=this.checked?true:false;if(c==true){$('input.newsletter:checkbox').attr('checked',false);$('input.event:checkbox').attr('checked',false);}});$('input.newsletter').change(function(){var c=this.checked?true:false;if(c==true){$('input#unsubscribe_newsletters:checkbox').attr('checked',false);$('input#opt_out:checkbox').attr('checked',false);}});$('input.event').change(function(){var c=this.checked?true:false;if(c==true){$('input#unsubscribe_events:checkbox').attr('checked',false);$('input#opt_out:checkbox').attr('checked',false);}});$("#newsletter_form").validate({onfocusout:function(element){clearErrors(element);return $(element).valid();},onkeyup:function(element){clearErrors(element);},submitHandler:function(form){$('#event_form_submit').attr('disabled',true);$('#event_form_submit').attr('value','Processing...');reserved_email=($("input[name=Email]").val().trim().toLowerCase()=='aeidispatch@aei.org'||$("input[name=Email]").val().trim().toLowerCase()=='aeistaffdispatch@aei.org')?true:false;if(reserved_email){window.scrollTo(0,0);$('.req').removeClass("error");$(".errorMessage li.reserved").remove();$(".errorMessage").append("<li class='email error reserved'>* We apologize; you do not have permissions to modify preferences for "+$("input[name=Email]").val().trim()+". Please contact <a href=\"mailto:esubscriptions@aei.org\">esubscriptions@aei.org</a> to request changes to your AEI subscriptions.</li>");}else if($("input[type=checkbox]:checked").length==0){if($("li.checkbox").length==0){$(".errorMessage2").append("<li class='checkbox error'>* Please select at least one option</li>");$(".subscriptions").addClass("error");}
window.scrollTo(0,0);}else{grecaptcha.ready(function(){grecaptcha.execute('6Leh1JAiAAAAAGLj4kZADelDM0eMy8vbLgU4yBG0',{action:'submit'}).then(function(token){$(form).append('<input type="hidden" name="g-recaptcha_token" value="'+token+'" />');form.submit();$('#container').css("opacity","0.1");$('#loader').show();});});}},rules:{FirstName:{required:true},LastName:{required:true},Email:{required:true,email:true}},messages:{FirstName:"required",LastName:"required",Email:{required:"required",email:"email"}},showErrors:function(map,list){$.each(map,function(name,error){$("input[name="+name+"]").addClass('error');$("input[name="+name+"]").siblings("label").addClass('error');$("input[name="+name+"]").siblings("span.bar").addClass('error');$("#contact-holder").addClass("error");reserved_email=($("input[name=Email]").val().trim().toLowerCase()=='aeidispatch@aei.org'||$("input[name=Email]").val().trim().toLowerCase()=='aeistaffdispatch@aei.org')?true:false;if((error=='required'&&!$(".req").hasClass("error"))||reserved_email){if((error=='required'&&!$(".req").hasClass("error"))&&reserved_email){$(".errorMessage").append("<li class='email error reserved'>* We apologize; you do not have permissions to modify preferences for "+$("input[name=Email]").val().trim()+". Please contact <a href=\"mailto:esubscriptions@aei.org\">esubscriptions@aei.org</a> to request changes to your AEI subscriptions.</li>");}else{$('.req').addClass("error");}}else if(error=='email'&&!$(".errorMessage").has("li.email").length&&!reserved_email){$(".errorMessage").append("<li class='email error'>* Please enter a valid email address</li>");}else{$('.req').addClass("error");}});}});function clearErrors(e){var input=$(e),email_isnull=($("input[name=Email]").val().trim()=='')?true:false;reserved_email=($("input[name=Email]").val().trim().toLowerCase()=='aeidispatch@aei.org'||$("input[name=Email]").val().trim().toLowerCase()=='aeistaffdispatch@aei.org')?true:false;input.removeClass('error');input.siblings("label").removeClass('error');input.siblings("span.bar").removeClass('error');if($("input[name=FirstName]").val().trim()!=''&&$("input[name=LastName]").val().trim()!=''&&!email_isnull){if(reserved_email){$(".errorMessage li.reserved").show();}else{$('.req').removeClass("error");$(".errorMessage li.reserved").remove();}}
if(!email_isnull&&$("input[name=Email]").valid()){$(".errorMessage li.email").remove();}
if(!email_isnull&&reserved_email){$(".errorMessage").append("<li class='email error reserved'>* We apologize; you do not have permissions to modify preferences for "+$("input[name=Email]").val().trim()+". Please contact <a href=\"mailto:esubscriptions@aei.org\">esubscriptions@aei.org</a> to request changes to your AEI subscriptions.</li>");}
if(email_isnull){$('.req').addClass("error");$(".errorMessage li.reserved").remove();}
if($("#contact-holder input.error").length==0){$("#contact-holder").removeClass("error");}
if($("input[type=checkbox]:checked").length>0){$(".errorMessage2 li.checkbox").remove();$(".subscriptions").removeClass("error");}}
if(top.location.pathname.indexOf("/events/")==0){$.jStorage.set('title',title);$.jStorage.set('start',start);$.jStorage.set('end',end);$.jStorage.set('address',address);$.jStorage.set('description',description);var myCalendar=createCalendar({options:{class:'calendar-buttons',},data:{title:title,start:new Date(start),end:new Date(end),address:address,description:description}});document.querySelector('.new-cal').appendChild(myCalendar);}
if(top.location.pathname==='/thank-you/'){var getTitle=$.jStorage.get('title');var getStart=$.jStorage.get('start');var getEnd=$.jStorage.get('end');var getAddress=$.jStorage.get('address');var getDescription=$.jStorage.get('description');var myCalendar=createCalendar({options:{class:'calendar-buttons',},data:{title:getTitle,start:new Date(getStart),end:new Date(getEnd),address:getAddress,description:getDescription}});document.querySelector('.new-cal').appendChild(myCalendar);$.jStorage.flush();}});})(jQuery);